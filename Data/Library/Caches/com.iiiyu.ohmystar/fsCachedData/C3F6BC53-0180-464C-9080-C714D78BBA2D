<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-plplayerkit" class="anchor" href="#plplayerkit" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PLPlayerKit</h1>

<p>PLPlayerKit 是一个适用于 iOS 的音视频播放器 SDK，可高度定制化和二次开发，特色是支持 RTMP, HTTP-FLV 和 HLS 直播流媒体播放。</p>

<p>功能特性</p>

<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="" disabled=""> RTMP 直播流播放</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="" disabled=""> HTTP-FLV 直播流播放</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="" disabled=""> HLS 播放</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="" disabled=""> 高可定制</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="" disabled=""> 音频播放</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="" disabled=""> RTMP 直播首屏秒开支持</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="" disabled=""> RTMP 直播累积延迟消除技术</li>
</ul>

<h2><a id="user-content-内容摘要" class="anchor" href="#内容摘要" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内容摘要</h2>

<ul>
<li><a href="#1-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">快速开始</a>

<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E5%B7%A5%E7%A8%8B">配置工程</a></li>
<li><a href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81">示例代码</a></li>
</ul></li>
<li><a href="#%E5%85%B3%E4%BA%8E2.0%E7%89%88%E6%9C%AC">关于 2.0 版本</a></li>
<li><a href="#%E7%89%88%E6%9C%AC%E5%8E%86%E5%8F%B2">版本历史</a></li>
</ul>

<h2><a id="user-content-快速开始" class="anchor" href="#快速开始" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快速开始</h2>

<h3><a id="user-content-配置工程" class="anchor" href="#配置工程" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>配置工程</h3>

<ul>
<li>配置你的 Podfile 文件，添加如下配置信息</li>
</ul>

<pre><code>pod 'PLPlayerKit'
</code></pre>

<ul>
<li>安装 CocoaPods 依赖</li>
</ul>

<pre><code>pod update
</code></pre>

<p>or</p>

<pre><code>pod install
</code></pre>

<ul>
<li>Done! 运行你工程的 workspace</li>
</ul>

<h3><a id="user-content-示例代码" class="anchor" href="#示例代码" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>示例代码</h3>

<p>在需要的地方添加</p>

<div class="highlight highlight-source-objc"><pre>#<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">&lt;</span>PLPlayerKit/PLPlayerKit.h<span class="pl-pds">&gt;</span></span></pre></div>

<p>初始化 PLPlayerOption</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">// 初始化 PLPlayerOption 对象</span>
PLPlayerOption *option = [PLPlayerOption <span class="pl-c1">defaultOption</span>];

<span class="pl-c">// 更改需要修改的 option 属性键所对应的值</span>
[option <span class="pl-c1">setOptionValue:</span>@<span class="pl-c1">15</span> <span class="pl-c1">forKey:</span>PLPlayerOptionKeyTimeoutIntervalForMediaPackets];
[option <span class="pl-c1">setOptionValue:</span>@<span class="pl-c1">1000</span> <span class="pl-c1">forKey:</span>PLPlayerOptionKeyMaxL1BufferDuration];
[option <span class="pl-c1">setOptionValue:</span>@<span class="pl-c1">1000</span> <span class="pl-c1">forKey:</span>PLPlayerOptionKeyMaxL2BufferDuration];
[option <span class="pl-c1">setOptionValue:</span>@(<span class="pl-c1">YES</span>) <span class="pl-c1">forKey:</span>PLPlayerOptionKeyVideoToolbox];
[option <span class="pl-c1">setOptionValue:</span>@(<span class="pl-c1">kPLLogInfo</span>) <span class="pl-c1">forKey:</span>PLPlayerOptionKeyLogLevel];
[option <span class="pl-c1">setOptionValue:</span>[QNDnsManager <span class="pl-c1">new</span>] <span class="pl-c1">forKey:</span>PLPlayerOptionKeyDNSManager];
</pre></div>

<p>初始化 PLPlayer</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">// 初始化 PLPlayer</span>
self.player = [PLPlayer <span class="pl-c1">playerWithURL:</span><span class="pl-v">self</span>.URL <span class="pl-c1">option:</span>option];

<span class="pl-c">// 设定代理 (optional)</span>
self.player.delegate = self;</pre></div>

<p>获取播放器的视频输出的 UIView 对象并添加为到当前 UIView 对象的 Subview</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">//获取视频输出视图并添加为到当前 UIView 对象的 Subview</span>
[<span class="pl-v">self</span>.view <span class="pl-c1">addSubview:</span>player.playerView];</pre></div>

<p>开始／暂停操作</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">// 播放</span>
[<span class="pl-v">self</span>.player <span class="pl-c1">play</span>];

<span class="pl-c">// 停止</span>
[<span class="pl-v">self</span>.player <span class="pl-c1">stop</span>];

<span class="pl-c">// 暂停</span>
[<span class="pl-v">self</span>.player <span class="pl-c1">pause</span>];

<span class="pl-c">// 继续播放</span>
[<span class="pl-v">self</span>.player <span class="pl-c1">resume</span>];</pre></div>

<p>播放器状态获取</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">// 实现 &lt;PLPlayerDelegate&gt; 来控制流状态的变更</span>
- (<span class="pl-k">void</span>)player:(nonnull PLPlayer *)player statusDidChange:(PLPlayerStatus)state {
    <span class="pl-c">// 这里会返回流的各种状态，你可以根据状态做 UI 定制及各类其他业务操作</span>
    <span class="pl-c">// 除了 Error 状态，其他状态都会回调这个方法</span>
}

- (<span class="pl-k">void</span>)player:(nonnull PLPlayer *)player stoppedWithError:(nullable <span class="pl-c1">NSError</span> *)error {
    <span class="pl-c">// 当发生错误时，会回调这个方法</span>
}</pre></div>

<h2><a id="user-content-音频部分的特别说明" class="anchor" href="#音频部分的特别说明" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>音频部分的特别说明</h2>

<p>因为 iOS 的音频资源被设计为单例资源，所以如果在 player 中做的任何修改，对外都可能造成影响，并且带来不能预估的各种问题。</p>

<p>为了应对这一情况，PLPlayerKit 采取的方式是检查是否可以播放及是否可以进入后台，而在内部不做任何设置。具体是通过扩展 <code>AVAudioSession</code> 来做到的，提供了两个方法，如下：</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">/*!</span>
<span class="pl-c"> * @description 检查当前 AVAudioSession 的 category 配置是否可以播放音频. 当为 AVAudioSessionCategoryAmbient,</span>
<span class="pl-c"> * AVAudioSessionCategorySoloAmbient, AVAudioSessionCategoryPlayback, AVAudioSessionCategoryPlayAndRecord</span>
<span class="pl-c"> * 中的一种时为 YES, 否则为 NO.</span>
<span class="pl-c"> */</span>
+ (<span class="pl-k">BOOL</span>)isPlayable;

<span class="pl-c">/*!</span>
<span class="pl-c"> * @description 检查当前 AVAudioSession 的 category 配置是否可以后台播放. 当为 AVAudioSessionCategoryPlayback,</span>
<span class="pl-c"> * AVAudioSessionCategoryPlayAndRecord 中的一种时为 YES, 否则为 NO.</span>
<span class="pl-c"> */</span>
+ (<span class="pl-k">BOOL</span>)canPlayInBackground;</pre></div>

<p>分辨可以检查是否可以播放以及当前 category 的设置是否可以后台播放。</p>

<h2><a id="user-content-版本历史" class="anchor" href="#版本历史" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>版本历史</h2>

<ul>
<li>2.2.2 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.2.2.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.2.2.md">API Diffs</a>)</li>
<li>功能

<ul>
<li>新增 AAC HEV2 音频支持</li>
<li>新增 SDK 自动重连功能，默认不开启</li>
</ul></li>
<li>缺陷

<ul>
<li>修复长时间播放偶发解码 crash</li>
<li>修复 pause/resmue 快速调用导致 crash</li>
<li>修复重连未更换服务器 IP</li>
<li>修复 rtmp 硬解播放视频抖动</li>
<li>修复 flv 开始播放偶发黑屏</li>
<li>修复 flv 超时机制失效</li>
</ul></li>
<li>2.2.1 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.2.1.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.2.1.md">API Diffs</a>)</li>
<li>功能

<ul>
<li>支持 SDK 日志级别设置</li>
<li>新增 HappyDNS 支持</li>
</ul></li>
<li>缺陷

<ul>
<li>修复回看状态不准确问题</li>
<li>修复跳转第三方应用，出现内存增加</li>
<li>修复播放卡住 caching 状态</li>
</ul></li>
<li>2.2.0 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.2.0.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.2.0.md">API Diffs</a>)</li>
<li>功能

<ul>
<li>新增硬解功能</li>
<li>新增 http-flv 支持</li>
<li>新增 iOS9 下的纯 IPV6 环境支持</li>
</ul></li>
<li>缺陷

<ul>
<li>修复快速进入退出黑屏</li>
</ul></li>
<li>优化

<ul>
<li>追帧策略优化</li>
<li>退出后台停止视频解码</li>
</ul></li>
<li>2.1.3 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.1.3.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.1.3.md">API Diffs</a>)

<ul>
<li>增加设置一级缓存和二级缓存的选项，便于控制卡顿率</li>
<li>修复播放 OBS 及 FFmpeg 推的流黑屏的问题</li>
<li>修复播放结束后无法重播的问题</li>
<li>修复播放过程中内存暴增的问题</li>
<li>拆分 pili-librtmp 为公共依赖，解决模拟器环境下与 PLStreamingKit 冲突的问题</li>
</ul></li>
<li>2.1.2 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.1.2.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.1.2.md">API Diffs</a>)

<ul>
<li>增加确切的错误枚举，方便定位错误类型</li>
<li>增加 mute, currentTime, totalDuration, seekTo 等接口</li>
<li>修复首屏开启以及播放过程中出现缓存后网络恢复是可能出现的 UI 卡顿问题</li>
<li>修复 contentMode 偶尔设置无效的问题</li>
<li>修复重新设置播放 url 播放的问题</li>
<li>修复快速 -stop 以及 -play 出现的内存泄露问题</li>
</ul></li>
<li>2.1.1 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.1.1.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.1.1.md">API Diffs</a>)

<ul>
<li>首屏开启速度优化，在网络状况良好的情况下能实现秒开效果</li>
<li>弱网情况下的累积延迟问题优化，较好控制累积延迟在数秒以内</li>
<li>解决了上一版遇到的无法设置 playerView.contentMode 以及 playerOption 的问题</li>
<li>解决了不标准流可能出现的音频断续，播放器内存异常增长问题</li>
<li>后台播放体验优化，修复了后台播放被其他音频打断后出现的一系列问题</li>
<li>解决了应用切换时出现的 UI 卡死问题</li>
</ul></li>
<li>2.1.0 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.1.0.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.1.0.md">API Diffs</a>)

<ul>
<li>此次更新为重大版本升级，更改了大量 API 并重构了包括解码渲染在内的多项内容，建议所有用户进行升级，并且根据<a href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">快速开始</a>使用新版 API 对工程重新进行配置。</li>
<li>更改了播放器的音频解码和渲染方式</li>
<li>更改了播放器的时钟同步机制</li>
<li>重构了内部逻辑，使播放器更稳定</li>
<li>重构了播放器 API ，使播放器的使用更加简单明了，去除了使用起来不方便的部分 API</li>
<li>解决了播放过程中可能出现声音消失的问题</li>
<li>解决了退后台返回后音视频无法正常同步的问题</li>
<li>修改播放器音视频同步机制</li>
<li>解决持续播放过程中出现部分内存没有正确释放的问题</li>
<li>解决了 iOS 版本小于 8.0 时 Demo 出现的crash问题</li>
</ul></li>
<li>2.0.4 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.0.4.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.0.4.md">API Diffs</a>)

<ul>
<li>解决 RTMP 播放时可能黑屏的问题</li>
</ul></li>
<li>2.0.3 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.0.3.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.0.3.md">API Diffs</a>)

<ul>
<li>解决 RTMP 播放没有声音</li>
<li>解决 RTMP 无法播放导致内存急增最终 App crash</li>
<li>解决 RTMP 无法播放画面只有声音</li>
<li>解决播放 RTMP 时相关的 crash 问题</li>
</ul></li>
<li>2.0.2 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.0.2.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.0.2.md">API Diffs</a>)

<ul>
<li>添加 RTMP Cache 机制</li>
<li>添加数据超时属性</li>
<li>修复 RTMP 播放内存 leak</li>
<li>修复 RTMP 播放音频错误问题</li>
<li>修复 RTMP 播放主线程卡死问题</li>
<li>优化架构，减少内存和 cpu 占用</li>
</ul></li>
<li>2.0.1 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.0.1.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.0.1.md">API Diffs</a>)

<ul>
<li>修复 <code>contentMode</code> 设置无效的问题</li>
<li>修复 rtmp 无法播放或播放超时时无 error 抛出的问题</li>
<li>修复 rtmp 播放失败时触发的 cpu 飙升问题</li>
<li>修复 stop 可能触发的 crash 问题</li>
<li>更新 demo 确保在 iOS 9.1 下运行正常</li>
</ul></li>
<li>2.0.0 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-2.0.0.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-2.0.0.md">API Diffs</a>)

<ul>
<li>添加全新的 <code>PLPlayer</code>，弃用 <code>PLVideoPlayerController</code> 和 <code>PLAudioPlayerController</code></li>
<li>播放 RTMP 音视频流时，进入后台后声音继续播放，不会断开，返回前台追帧显示最新视频帧</li>
<li>针对 RTMP 直播彻底优化，首屏秒开，最小化缓存</li>
<li>完全无 ffmpeg 依赖，包体积再次缩小</li>
<li>优化资源占用，比 1.x 版本内存占用减少 50% 以上</li>
</ul></li>
<li>1.2.22 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.22.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.22.md">API Diffs</a>)

<ul>
<li>修复因收到内存警告而引起的崩溃问题</li>
<li>修复停止播放时，可能进入错误 play state 的问题</li>
</ul></li>
<li>1.2.21 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.21.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.21.md">API Diffs</a>)

<ul>
<li>修复 <code>PLVideoParameterFrameViewContentMode</code> 与 <code>PLVideoParameterDisableDeinterlacing</code> 设置无效的问题</li>
</ul></li>
<li>1.2.20 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.20.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.20.md">API Diffs</a>)

<ul>
<li>修复 <code>seekTo:</code> 不准确的问题</li>
<li>添加 <code>PLPlayerStateSeeking</code> 类型</li>
</ul></li>
<li>1.2.19 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.19.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.19.md">API Diffs</a>)

<ul>
<li>修复播放无返回状态的问题（针对无直播的流、hls 回放）</li>
<li>修复 hls 回放结束时无 stopped 回调的问题</li>
<li>修复 hls 回放开始的 duration 不为 0 的问题</li>
</ul></li>
<li>1.2.18 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.18.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.18.md">API Diffs</a>)

<ul>
<li>修复在 prepare 状态前释放 player 导致的音频仍然会播放的问题</li>
<li>修复 player 状态返回的类型不正确的问题</li>
<li>优化推出时资源释放</li>
</ul></li>
<li>1.2.17 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.17.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.17.md">API Diffs</a>)

<ul>
<li>修复超时时导致的崩溃的问题</li>
</ul></li>
<li>1.2.16 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.17.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.16.md">API Diffs</a>)

<ul>
<li>添加了音频播放器后台播放的支持</li>
<li>添加了音频播放器后台播放任务开始和结束的回调</li>
<li>添加了音视频播放器超时时长的设定</li>
<li>添加了音视频播放器准备的方法</li>
<li>添加了音视频完全停止播放器的方法</li>
<li>修复播放器不可释放的问题</li>
</ul></li>
<li>1.2.15 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.15.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.15.md">API Diffs</a>)

<ul>
<li>修复 AudioPlayer 无法播放带有视频流的 RTMP 流的问题</li>
</ul></li>
<li>1.2.14 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.14.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.14.md">API Diffs</a>)

<ul>
<li>添加 AudioManager</li>
</ul></li>
<li>1.2.13 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.13.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.13.md">API Diffs</a>)

<ul>
<li>添加纯音频播放控件</li>
<li>更新参数字段及类型，确保通用类型可以在音频及视频播放器使用</li>
<li>更新类型名称，增加易读性，减少歧义</li>
</ul></li>
<li>1.2.12 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.12.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.12.md">API Diffs</a>)

<ul>
<li>更改 repo 地址</li>
</ul></li>
<li>1.2.11 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.11.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.11.md">API Diffs</a>)

<ul>
<li>添加对应用状态的判断，减少因进入后台通知延时未能及时暂停播放导致的 crash</li>
</ul></li>
<li>1.2.10 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.10.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.10.md">API Diffs</a>)

<ul>
<li>添加音频外设更改时的通知</li>
<li>添加音量变更时的通知</li>
<li>添加打进电话等其他事件导致音频中断的通知</li>
</ul></li>
<li>1.2.9 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.9.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.9.md">API Diffs</a>)

<ul>
<li>修复进入后台后崩溃的问题</li>
<li>更新 example 中 player 代码，支持横竖屏旋转操作</li>
</ul></li>
<li>1.2.8 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.8.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.8.md">API Diffs</a>)

<ul>
<li>添加播放进度回调方法</li>
<li>修复 seekTo 后流状态不正确的问题</li>
</ul></li>
<li>1.2.7 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.7.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.7.md">API Diffs</a>)

<ul>
<li>添加播放器状态属性</li>
<li>添加解码器初始化完成后回调</li>
<li>添加播放器状态回调</li>
<li>添加初始化后自动播放参数</li>
</ul></li>
<li>1.2.6 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.6.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.6.md">API Diffs</a>)

<ul>
<li>添加设置播放位置的操作</li>
<li>添加了快进、快退的操作</li>
<li>添加总播放时长的属性</li>
<li>添加获取音量的属性</li>
<li>添加获取当前播放位置的属性</li>
<li>添加静音操作</li>
</ul></li>
<li>1.2.5 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.5.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.5.md">API Diffs</a>)

<ul>
<li>修复与部分其他库头文件冲突的问题</li>
</ul></li>
<li>1.2.4 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.4.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.4.md">API Diffs</a>)

<ul>
<li>添加了 <code>PLMovieParameterFrameViewContentMode</code> 参数</li>
<li>修复与部分其他库头文件冲突的问题</li>
<li>修复 Player contentMode 无法更改的问题</li>
</ul></li>
<li>1.2.3 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.3.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.3.md">API Diffs</a>)

<ul>
<li>修复初始化占用主线程导致卡顿的问题</li>
<li>修复错误回调无效的问题</li>
</ul></li>
<li>1.2.2 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.2.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.2.md">API Diffs</a>)

<ul>
<li>修复 lib 未更新导致的 crash</li>
</ul></li>
<li>1.2.1 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.1.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.1.md">API Diffs</a>)

<ul>
<li>添加 failue 情况下的回调，返回 NSError 对象</li>
<li>移除 PLVideoPlayerViewController，请直接使用 PLVideoPlayerController 进行定制</li>
</ul></li>
<li>1.2.0 (<a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/ReleaseNotes/release-notes-1.2.0.md">Release Notes</a> &amp;&amp; <a href="https://github.com/pili-engineering/PLPlayerKit/blob/master/APIDiffs/api-diffs-1.2.0.md">API Diffs</a>)

<ul>
<li>极大缩小 lib 大小</li>
<li>增加可定制的播放控件 PLVideoPlayerController</li>
</ul></li>
<li>1.1.2

<ul>
<li>拆分 Flat lib</li>
<li>添加了 x86_64 支持，便于在 iPhone 6 Plus 模拟器下调试使用</li>
</ul></li>
<li>1.1.1

<ul>
<li>对库引用做了些修改</li>
</ul></li>
<li>1.1.0

<ul>
<li>发布 CocoaPods 版本</li>
</ul></li>
</ul>
</article></div>